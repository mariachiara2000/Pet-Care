<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>PetCare ğŸ¾</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f6f7fb;
  padding: 20px;
  transition: background 0.4s;
}

.hidden { display: none; }

.card {
  background: white;
  padding: 16px;
  border-radius: 18px;
  margin-bottom: 16px;
}

button {
  padding: 10px 14px;
  border: none;
  border-radius: 12px;
  background: #ff9aa2;
  color: white;
  margin: 4px;
  cursor: pointer;
}

.progress {
  background: #ddd;
  height: 14px;
  border-radius: 10px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background: #8ed1fc;
}

.pet-box {
  text-align: center;
  font-size: 72px;
  position: relative;
}

.accessory {
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 32px;
}

.rare {
  box-shadow: 0 0 10px gold;
}

.level {
  font-size: 14px;
  color: #777;
}
</style>
</head>

<body>

<!-- SETUP -->
<div id="setup" class="card hidden">
  <h2>ğŸ£ Escolha seu pet</h2>
  <button onclick="choosePet('ğŸ¶')">ğŸ¶</button>
  <button onclick="choosePet('ğŸ±')">ğŸ±</button>
  <button onclick="choosePet('ğŸ°')">ğŸ°</button>
  <br><br>
  <input id="petName" placeholder="Nome do pet">
  <br><br>
  <button onclick="startGame()">ComeÃ§ar</button>
</div>

<!-- APP -->
<div id="app" class="hidden">

<div class="card pet-box">
  <div id="accessory" class="accessory"></div>
  <div id="petEmoji"></div>
  <div class="level">ğŸ§¬ NÃ­vel <span id="level">1</span></div>
  â­ Pontos: <span id="points">0</span>
</div>

<div class="card">
ğŸ– <div class="progress"><div id="foodBar" class="progress-bar"></div></div>
ğŸ’§ <div class="progress"><div id="waterBar" class="progress-bar"></div></div>
ğŸ› <div class="progress"><div id="cleanBar" class="progress-bar"></div></div>
ğŸ˜´ <div class="progress"><div id="sleepBar" class="progress-bar"></div></div>
</div>

<div class="card">
<button onclick="care('food')">ğŸ–</button>
<button onclick="care('water')">ğŸ’§</button>
<button onclick="care('clean')">ğŸ›</button>
<button onclick="care('sleep')">ğŸ˜´</button>
</div>

<div class="card">
<h3>ğŸ›’ Loja</h3>
<button onclick="buy('ğŸ©',100)">ğŸ© ChapÃ©u (100)</button>
<button onclick="buy('ğŸ€',150)">ğŸ€ LaÃ§o (150)</button>
<button onclick="buyRare('ğŸ‘‘',500)">ğŸ‘‘ Raro</button>
</div>

<div class="card">
<h3>ğŸ’ InventÃ¡rio</h3>
<div id="inventory"></div>
</div>

</div>

<script>
let pet = localStorage.getItem("pet");
let name = localStorage.getItem("name");
let points = Number(localStorage.getItem("points")) || 0;
let level = Number(localStorage.getItem("level")) || 1;
let xp = Number(localStorage.getItem("xp")) || 0;
let inventory = JSON.parse(localStorage.getItem("inventory")) || [];
let accessory = localStorage.getItem("accessory") || "";

let food = 60, water = 60, clean = 60, sleepLv = 60;

const stages = [
  {emoji:"ğŸ£", bg:"#f6f7fb", xp:0},
  {emoji:"ğŸ¥", bg:"#e0f2fe", xp:50},
  {emoji:"ğŸ¶", bg:"#dcfce7", xp:150},
  {emoji:"ğŸ¦Š", bg:"#fff7ed", xp:300},
  {emoji:"ğŸ‰", bg:"#fdf4ff", xp:600}
];

if (!pet) setup.classList.remove("hidden");
else init();

function choosePet(p){ pet = p; }

function startGame(){
  name = petName.value || "Meu Pet";
  save();
  init();
}

function init(){
  setup.classList.add("hidden");
  app.classList.remove("hidden");
  petEmoji.innerText = pet;
  accessoryEl.innerText = accessory;
  update();
  tick();
}

function update(){
  foodBar.style.width = food + "%";
  waterBar.style.width = water + "%";
  cleanBar.style.width = clean + "%";
  sleepBar.style.width = sleepLv + "%";

  pointsEl.innerText = points;
  levelEl.innerText = level;
  petEmoji.innerText = stages[level-1].emoji;
  document.body.style.background = stages[level-1].bg;

  renderInventory();
  save();
}

function care(type){
  let valid=false;

  if(type==="food" && food<80){food+=20;valid=true}
  if(type==="water" && water<80){water+=20;valid=true}
  if(type==="clean" && clean<80){clean=100;valid=true}
  if(type==="sleep" && sleepLv<80){sleepLv=100;valid=true}

  if(valid){
    points += (level>=3 ? 8 : 5);
    xp += 10;
    checkEvolution();
  } else {
    alert("âŒ Seu pet nÃ£o precisa disso agora");
  }

  update();
}

function checkEvolution(){
  if(level < stages.length && xp >= stages[level].xp){
    level++;
    alert("ğŸ§¬ Seu pet evoluiu!");
  }
}

function tick(){
  let decay = level>=2 ? 0.7 : 1;
  food -= 0.2 * decay;
  water -= 0.3 * decay;
  clean -= 0.1 * decay;
  sleepLv -= 0.15 * decay;
  update();
  setTimeout(tick, 5000);
}

function buy(item,cost){
  if(points>=cost && !inventory.includes(item)){
    points -= cost;
    inventory.push(item);
  }
  update();
}

function buyRare(item,cost){
  if(points>=cost && !inventory.includes(item)){
    points -= cost;
    inventory.push(item);
    alert("âœ¨ Item raro desbloqueado!");
  }
  update();
}

function renderInventory(){
  inventoryDiv.innerHTML="";
  inventory.forEach(i=>{
    let b=document.createElement("button");
    b.innerText=i;
    if(i==="ğŸ‘‘") b.classList.add("rare");
    b.onclick=()=>{accessory=i; accessoryEl.innerText=i; save();}
    inventoryDiv.appendChild(b);
  });
}

function save(){
  localStorage.setItem("pet",pet);
  localStorage.setItem("name",name);
  localStorage.setItem("points",points);
  localStorage.setItem("level",level);
  localStorage.setItem("xp",xp);
  localStorage.setItem("inventory",JSON.stringify(inventory));
  localStorage.setItem("accessory",accessory);
}
</script>

</body>
</html>
