<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>PetCare ğŸ¾</title>

<style>
body{font-family:Arial;background:#f6f7fb;padding:20px}
.card{background:#fff;padding:16px;border-radius:18px;margin-bottom:16px}
button{padding:10px;border:none;border-radius:12px;background:#ff9aa2;color:#fff;margin:4px}
.pet-area{display:flex;justify-content:center;gap:30px;align-items:flex-end}
.pet{font-size:90px;position:relative}
.accessory{position:absolute;top:-10px;left:50%;transform:translateX(-50%)}
.egg{font-size:40px}
.hidden{display:none}
.progress{background:#ddd;height:10px;border-radius:10px;overflow:hidden;margin-top:4px}
.progress-bar{height:100%;background:#ff9aa2}
.inventory-item{border-bottom:1px solid #ddd;padding:6px}
.small{font-size:12px;color:#666}
#foodAnimEl{position:absolute;bottom:-20px;font-size:28px;animation:jump .8s}
@keyframes jump{0%{transform:translateY(0)}50%{transform:translateY(-20px)}100%{transform:translateY(0)}}
.glow{text-shadow:0 0 8px gold}
</style>
</head>

<body>

<!-- SETUP -->
<div id="setup" class="card hidden">
<h2>Escolha seu pet</h2>
<button onclick="choosePet('ğŸ¶')">ğŸ¶</button>
<button onclick="choosePet('ğŸ±')">ğŸ±</button>
<button onclick="choosePet('ğŸ°')">ğŸ°</button>
<button onclick="choosePet('ğŸ£')">ğŸ£</button><br><br>
<button onclick="start()">ComeÃ§ar</button>
</div>

<!-- APP -->
<div id="app" class="hidden">

<div class="card pet-area">
  <div class="pet">
    <div id="mainPetEl"></div>
    <div id="mainAcc" class="accessory"></div>
    <div id="foodAnimEl"></div>
  </div>

  <div id="cryingEgg" class="egg hidden">ğŸ¥šğŸ˜¢</div>

  <div class="pet">
    <div id="babyPetEl"></div>
    <div id="babyAcc" class="accessory"></div>
  </div>
</div>

<div class="card">
â­ Pontos: <span id="pointsEl">0</span>
</div>

<!-- CUIDADOS -->
<div class="card">
<button onclick="care('food')">ğŸ½ï¸</button>
<button onclick="care('water')">ğŸ’§</button>
<button onclick="care('bath')">ğŸš¿</button>
<button onclick="care('sleep')">ğŸ˜´</button>
<button onclick="care('love')">â¤ï¸</button>

<div class="progress"><div id="foodBar" class="progress-bar"></div></div>
<div class="progress"><div id="waterBar" class="progress-bar"></div></div>
<div class="progress"><div id="bathBar" class="progress-bar"></div></div>
<div class="progress"><div id="sleepBar" class="progress-bar"></div></div>
<div class="progress"><div id="loveBar" class="progress-bar"></div></div>
</div>

<div class="card">
<h3>ğŸ’ InventÃ¡rio</h3>
<div id="inventory"></div>
</div>

<div class="card">
<h3>ğŸ›ï¸ Loja</h3>
<button onclick="buy('ğŸ€',50)">ğŸ€</button>
<button onclick="buy('ğŸ§¸',70)">ğŸ§¸</button>
<button onclick="buy('â­ï¸',100)">â­ï¸</button><br>
<button onclick="buy('ğŸ',10)">ğŸ</button>
<button onclick="buy('ğŸ',10)">ğŸ</button>
<button onclick="buy('ğŸŠ',10)">ğŸŠ</button>
<button onclick="buy('ğŸ‹',10)">ğŸ‹</button>
<button onclick="buy('ğŸ',10)">ğŸ</button>
<p class="small">ğŸğŸğŸŠğŸ‹ğŸ = decorativo</p>
</div>

</div>

<script>
let pets=["ğŸ¶","ğŸ±","ğŸ°","ğŸ£"];
let mainPet=localStorage.getItem("mainPet");
let babyPet=localStorage.getItem("babyPet");

let points=Number(localStorage.getItem("points"))||100;
let love=Number(localStorage.getItem("love"))||70;
let food=60,water=60,bath=60,sleepLv=60;

let accessories=JSON.parse(localStorage.getItem("accessories"))||{};
let rareAccessory=localStorage.getItem("rareAccessory")||"";
let egg=JSON.parse(localStorage.getItem("egg"))||null;
let crying=true;
let lastToyUse=0;

if(!mainPet) setup.classList.remove("hidden");
else init();

function choosePet(p){mainPet=p}
function start(){save();init()}

function init(){
setup.classList.add("hidden");
app.classList.remove("hidden");
update();
setInterval(gameTick,1000);
}

function gameTick(){
food-=0.05;water-=0.06;bath-=0.04;sleepLv-=0.03;love-=0.02;
food=Math.max(0,food);water=Math.max(0,water);bath=Math.max(0,bath);sleepLv=Math.max(0,sleepLv);love=Math.max(0,love);
if(rareAccessory) love=Math.min(100,love+0.02);
updateEgg();
update();
}

function care(type){
let ok=false;
if(type==="food"&&food<80){food+=20;ok=true}
if(type==="water"&&water<80){water+=20;ok=true}
if(type==="bath"&&bath<80){bath+=30;ok=true}
if(type==="sleep"&&sleepLv<80){sleepLv+=30;ok=true}
if(type==="love"&&love<80){love+=25;ok=true}

if(ok){
points+=5;
if(Math.random()<0.15&&!egg){
egg={type:"ğŸ¥š",start:Date.now(),time:5*60*1000};
crying=true;
}
}
update();
}

function updateEgg(){
if(!egg)return;
if(Date.now()-egg.start>=egg.time)crying=false;
}

function hatch(){
if(!egg)return;
if(Date.now()-egg.start<egg.time){alert("Ainda nÃ£o");return;}
let available=pets.filter(p=>p!==mainPet);
babyPet=available[Math.floor(Math.random()*available.length)];
egg=null;
save();
update();
}

function buy(item,cost){
if(points<cost){alert("Sem pontos");return;}
points-=cost;

if(["ğŸ","ğŸ","ğŸŠ","ğŸ‹","ğŸ"].includes(item)){
foodAnimEl.innerText=item;
setTimeout(()=>foodAnimEl.innerText="",800);
}
else if(item==="ğŸ§¸"){
let now=Date.now();
if(now-lastToyUse>60000){love=Math.min(100,love+10);lastToyUse=now;accessories[mainPet]="ğŸ§¸";}
}
else if(item==="ğŸ€"){accessories[mainPet]="ğŸ€"}
else if(item==="â­ï¸"){
let r=Math.random();
if(r<0.3)rareAccessory="âœ¨ğŸ€";
else if(r<0.6)points+=50;
}
update();
}

function renderInventory(){
inventory.innerHTML="";
if(egg){
let left=Math.ceil((egg.time-(Date.now()-egg.start))/1000);
inventory.innerHTML=`<div class="inventory-item">${egg.type} â³ ${left}s <button onclick="hatch()">Chocar</button></div>`;
}
}

function update(){
mainPetEl.innerText=mainPet+(love<30?" ğŸ˜¢":"");
babyPetEl.innerText=babyPet||"";
mainAcc.innerText=rareAccessory||accessories[mainPet]||"";
mainAcc.classList.toggle("glow",!!rareAccessory);
babyAcc.innerText=accessories[babyPet]||"";
pointsEl.innerText=points;
foodBar.style.width=food+"%";
waterBar.style.width=water+"%";
bathBar.style.width=bath+"%";
sleepBar.style.width=sleepLv+"%";
loveBar.style.width=love+"%";
cryingEgg.classList.toggle("hidden",!egg||!crying);
renderInventory();
save();
}

function save(){
localStorage.setItem("mainPet",mainPet);
localStorage.setItem("babyPet",babyPet);
localStorage.setItem("points",points);
localStorage.setItem("love",love);
localStorage.setItem("accessories",JSON.stringify(accessories));
localStorage.setItem("rareAccessory",rareAccessory);
localStorage.setItem("egg",JSON.stringify(egg));
}
</script>

</body>
</html>
